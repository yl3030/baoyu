<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>寶毓科技 | 會員中心-行事曆</title>
    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="./public/css/bootstrap/bootstrap.css" />

    <!-- fullcalender CSS -->
    <link
      href="https://www.baoyukeji.net/member/static/fullcalendar2/css/fullcalendar.css"
      rel="stylesheet"
    />
    <!-- my CSS CDN -->
    <link rel="stylesheet" href="./public/css/style.css" />
    <link rel="stylesheet" href="./public/css/member.css" />
  </head>

  <body>
    <header>
      <div class="container flex-style">
        <a href="index.html"
          ><img
            class="logo"
            src="https://www.baoyukeji.net/images/logo.png"
            alt="寶毓科技"
        /></a>
        <nav>
          <i class="fas fa-times menu-close"></i>
          <ul class="d-inline-block">
            <li class="d-inline-block mx-lg-3 mx-0">
              <a href="./blog.html">部落中心</a>
            </li>
            <li class="d-inline-block mx-lg-3 mx-0">
              <a href="#">電子商務</a>
            </li>
          </ul>
          <div class="d-inline-block user-box">
            <a href="#" class="user">會員中心</a>
            <ul class="m-member-nav">
              <li><a href="./member-myblog.html">我的部落</a></li>
              <li>
                <a href="./member-articleupdate.html">文章新增</a>
              </li>
              <li><a href="./member-mydata.html">基本資料</a></li>
              <li><a href="./member-password.html">修改密碼</a></li>
              <li>
                <a href="./member-calender.html" class="active">行事曆</a>
              </li>
              <li><a href="./member-note.html">記事本</a></li>
              <li><a href="./member-follow.html">關注列表 </a></li>
              <li><a href="./member-freind.html">好友列表</a></li>
              <li><a href="./member-hate.html">黑名單</a></li>
              <li><a href="./member-message.html">站內訊息</a></li>
              <li><a href="#">登出</a></li>
            </ul>
          </div>
        </nav>
        <div class="menu">
          <img src="./public/img/menu.png" alt="" />
        </div>
      </div>
    </header>
    <main class="member-box">
      <div class="container">
        <div class="row">
          <div class="col-lg-3 col-md-4">
            <div class="mb member-nav">
              <div class="pic-box">
                <div
                  class="pic bg"
                  style="
                    background-image: url(https://images.unsplash.com/photo-1616212317136-91621deadc35?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80);
                  "
                ></div>
              </div>
              <h3>吳鮭魚</h3>
              <ul>
                <li><a href="./member-myblog.html">我的部落</a></li>
                <li>
                  <a href="./member-articleupdate.html">文章新增</a>
                </li>
                <li><a href="./member-mydata.html">基本資料</a></li>
                <li><a href="./member-password.html">修改密碼</a></li>
                <li>
                  <a href="./member-calender.html" class="active">行事曆</a>
                </li>
                <li><a href="./member-note.html">記事本</a></li>
                <li><a href="./member-follow.html">關注列表 </a></li>
                <li><a href="./member-freind.html">好友列表</a></li>
                <li><a href="./member-hate.html">黑名單</a></li>
                <li><a href="./member-message.html">站內訊息</a></li>
                <li><a href="#">登出</a></li>
              </ul>
            </div>
          </div>
          <div class="col-lg-9 col-md-8">
            <div class="mb member-content">
              <h4 class="mb-title">行事曆</h4>
              <div id="calendar"></div>
            </div>
          </div>
        </div>
      </div>

      <div
        class="modal fade form-modal calendar-modal"
        id="ModalAdd"
        tabindex="-1"
        role="dialog"
        aria-labelledby="myModalLabel"
      >
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <form
              class="form-horizontal"
              method="POST"
              action="https://www.baoyukeji.net/member/center/fullcalendaradd"
            >
              <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">新增</h4>
              </div>
              <div class="modal-body">
                <div class="form-group flex-style">
                  <label for="title" class="control-label">標題</label>
                  <input
                    type="text"
                    name="title"
                    class="form-control"
                    id="title"
                    placeholder="Title"
                  />
                </div>
                <div class="form-group flex-style">
                  <label for="color" class="control-label">顏色</label>
                  <select name="color" class="form-control" id="color">
                    <option value="">Choose</option>
                    <option style="color: #0071c5" value="#0071c5">
                      &#9724; Dark blue
                    </option>
                    <option style="color: #40e0d0" value="#40E0D0">
                      &#9724; Turquoise
                    </option>
                    <option style="color: #008000" value="#008000">
                      &#9724; Green
                    </option>
                    <option style="color: #ffd700" value="#FFD700">
                      &#9724; Yellow
                    </option>
                    <option style="color: #ff8c00" value="#FF8C00">
                      &#9724; Orange
                    </option>
                    <option style="color: #ff0000" value="#FF0000">
                      &#9724; Red
                    </option>
                    <option style="color: #000" value="#000">
                      &#9724; Black
                    </option>
                  </select>
                </div>
                <div class="form-group flex-style">
                  <label for="start" class="control-label">開始日期</label>
                  <input
                    type="text"
                    name="start"
                    class="form-control"
                    id="start"
                  />
                </div>
                <div class="form-group flex-style">
                  <label for="end" class="control-label">結束日期</label>
                  <input type="text" name="end" class="form-control" id="end" />
                </div>
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-default cancel"
                  data-bs-dismiss="modal"
                >
                  取消
                </button>
                <button type="button" class="btn btn-primary save">確定</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </main>
    <footer class="mt">
      <div class="container flex-style">
        <div class="list">
          <div class="privacy">
            <a href="#">使用條款</a>
            <a href="#">隱私權</a>
          </div>
          <span>系統整合</span>
          <span>|</span>
          <span>跨平台設計</span>
          <span>|</span>
          <span>遊戲娛樂平台</span>
          <span>|</span>
          <span>影音平台</span>
          <span>|</span>
          <span>電子商務平台</span>
          <p>
            © 2015 by 寶毓科技 - BAOYUKEJI. All Rights Reserved - If there's any
            tort, please inform immediately.有任何侵權行為，請立即告知。
          </p>
        </div>
        <div class="link">
          <div class="social">
            <img src="https://www.baoyukeji.net/images/line_qr_m.png" alt="" />
            <img src="https://www.baoyukeji.net/images/facebook_2.jpg" alt="" />
          </div>
          <div class="share">
            <a href="#"><i class="fab fa-line"></i></a>
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-google"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-linkedin-in"></i></a>
          </div>
        </div>
      </div>
    </footer>
    <!-- awesomefont CDN -->
    <script
      src="https://kit.fontawesome.com/69fd600045.js"
      crossorigin="anonymous"
    ></script>

    <!-- jQuery CDN -->
    <script src="./public/js/jquery/jquery.min.js"></script>

    <!-- Bootstrap JS CDN -->
    <script src="./public/js/bootstrap/bootstrap.min.js"></script>
    <script src="./public/js/bootstrap/bootstrap.bundle.min.js"></script>

    <!-- FullCalendar -->
    <script src="https://www.baoyukeji.net/member/static/fullcalendar2/js/moment.min.js"></script>
    <script src="https://www.baoyukeji.net/member/static/fullcalendar2/js/fullcalendar.min.js"></script>
    <link
      href="https://www.baoyukeji.net/member/static/js/jquery-ui-1.12.1/jquery-ui.min.css"
      rel="stylesheet"
    />
    <script src="https://www.baoyukeji.net/member/static/js/jquery-ui-1.12.1/jquery-ui.min.js"></script>
    <script src="https://www.baoyukeji.net/member/static/js/jquery-ui-1.12.1/datepicker-zh-TW.js"></script>
    <link
      href="https://www.baoyukeji.net/member/static/js/jquery-ui-timepicker-addon.css"
      rel="stylesheet"
    />
    <script src="https://www.baoyukeji.net/member/static/js/jquery-ui-timepicker-addon.js"></script>

    <!-- my JS CDN -->
    <script src="./public/js/index.js"></script>
    <script>
      $(document).ready(function () {
        $("#ModalAdd #start").datetimepicker({
          changeMonth: true,
          changeYear: true,
          dateFormat: "yy-mm-dd",
          timeFormat: "HH:mm:ss",
        });
        $("#ModalAdd #end").datetimepicker({
          changeMonth: true,
          changeYear: true,
          dateFormat: "yy-mm-dd",
          timeFormat: "HH:mm:ss",
        });
        $("#ModalEdit #start").datetimepicker({
          changeMonth: true,
          changeYear: true,
          dateFormat: "yy-mm-dd",
          timeFormat: "HH:mm:ss",
        });
        $("#ModalEdit #end").datetimepicker({
          changeMonth: true,
          changeYear: true,
          dateFormat: "yy-mm-dd",
          timeFormat: "HH:mm:ss",
        });
      });
    </script>
    <script>
      $(document).ready(function () {
        $("#calendar").fullCalendar({
          buttonText: {
            today: "今天",
            month: "月",
            week: "周",
            day: "日",
          },
          allDayText: "全天",
          timeFormat: "HH:mm",
          views: {
            month: { titleFormat: "YYYY年MMMM月" },
            week: { titleFormat: "YYYY年MMMM月" },
            day: { titleFormat: "YYYY年MMMM月D日" },
          },
          monthNames: [
            "1",
            "2",
            "3",
            "4",
            "5",
            "6",
            "7",
            "8",
            "9",
            "10",
            "11",
            "12",
          ],
          monthNamesShort: [
            "1",
            "2",
            "3",
            "4",
            "5",
            "6",
            "7",
            "8",
            "9",
            "10",
            "11",
            "12",
          ],
          dayNames: [
            "星期天",
            "星期一",
            "星期二",
            "星期三",
            "星期四",
            "星期五",
            "星期六",
          ],
          dayNamesShort: [
            "星期天",
            "星期一",
            "星期二",
            "星期三",
            "星期四",
            "星期五",
            "星期六",
          ],
          //contentHeight: 650,
          header: {
            left: "prev,next today",
            center: "title",
            right: "month,agendaWeek,agendaDay",
          },
          defaultDate: "2021-03-20",
          editable: true,
          eventLimit: true, // allow "more" link when too many events
          selectable: true,
          selectHelper: true,
          select: function (start, end) {
            $("#ModalAdd #start").val(
              moment(start).format("YYYY-MM-DD HH:mm:ss")
            );
            $("#ModalAdd #end").val(moment(end).format("YYYY-MM-DD HH:mm:ss"));
            $("#ModalAdd").modal("show");
          },
          eventRender: function (event, element) {
            element.bind("dblclick", function () {
              $("#ModalEdit #id").val(event.id);
              $("#ModalEdit #title").val(event.title);
              $("#ModalEdit #color").val(event.color);
              $("#ModalEdit #start").val(
                moment(event.start).format("YYYY-MM-DD HH:mm:ss")
              );
              $("#ModalEdit #end").val(
                moment(event.end).format("YYYY-MM-DD HH:mm:ss")
              );
              $("#ModalEdit").modal("show");
            });
          },
          eventDrop: function (event, delta, revertFunc) {
            // si changement de position

            edit(event);
          },
          eventResize: function (event, dayDelta, minuteDelta, revertFunc) {
            // si changement de longueur

            edit(event);
          },
          events: [
            {
              id: "07CF5B1D-F03F-3538-7862-0D2EEDCD3935",
              title: "aaaa",
              start: "2021-03-10",
              end: "2021-04-01",
              color: "#008000",
            },
          ],
        });

        function edit(event) {
          start = event.start.format("YYYY-MM-DD HH:mm:ss");
          if (event.end) {
            end = event.end.format("YYYY-MM-DD HH:mm:ss");
          } else {
            end = start;
          }
          id = event.id;

          var url =
            "https://www.baoyukeji.net/member/center/ajax_fullcalendaredit";
          var data = { id: id, start: start, end: end };
          $.post(
            url,
            data,
            function (res) {
              if (res.status) {
                alert("更新成功。");
                location.reload();
              } else {
                alert("更新失敗。" + res.message);
              }
            },
            "json"
          );
        }
      });
    </script>
  </body>
</html>
